name = "mcp-b"
main = ".open-next/worker.js"
compatibility_date = "2025-11-06"
compatibility_flags = ["nodejs_compat", "global_fetch_strictly_public"]
keep_names = false

workers_dev = true

# Environment variables for public keys
[vars]
NEXT_PUBLIC_WEBSITE_URL = "https://mcp-b.ai"
# Add NEXT_PUBLIC_TURNSTILE_SITE_KEY if using Turnstile

# IMPORTANT: Add sensitive environment variables via Cloudflare Dashboard
# Go to: Workers & Pages → mcp-b → Settings → Variables
# Add these as secrets (encrypted):
#   - BROWSERBASE_API_KEY
#   - BROWSERBASE_PROJECT_ID
#   - BROWSERBASE_EXTENSION_ID
#   - BB_REGION (optional, defaults to us-east-1)
#   - TURNSTILE_SECRET_KEY (optional, for abuse protection)

[observability]
enabled = true

# Static assets from Next.js build
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# Self-referencing service binding (required for OpenNext)
[[services]]
binding = "WORKER_SELF_REFERENCE"
service = "mcp-b"

# R2 bucket for Next.js Incremental Static Regeneration (ISR) cache
[[r2_buckets]]
binding = "NEXT_INC_CACHE_R2_BUCKET"
bucket_name = "mcp-b-cache"
preview_bucket_name = "mcp-b-cache-preview"

# Uncomment and configure when ready to deploy to a custom domain
# routes = [
#   { pattern = "mcp-b.ai", custom_domain = true },
#   { pattern = "www.mcp-b.ai", custom_domain = true }
# ]
